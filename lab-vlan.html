<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio CCNA Avanzado</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            background-color: #0066a0;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
            text-align: center;
        }
        
        h2 {
            font-size: 24px;
            margin: 25px 0 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #0066a0;
            color: #0066a0;
        }
        
        h3 {
            font-size: 20px;
            margin: 20px 0 10px;
            color: #0066a0;
        }
        
        section {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .objective {
            background-color: #e8f4fc;
            border-left: 5px solid #0066a0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #0066a0;
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-size: 14px;
            line-height: 1.4;
        }
        
        code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }
        
        .command {
            color: #ffcc66;
        }
        
        .comment {
            color: #999;
            font-style: italic;
        }
        
        .config-section {
            margin-bottom: 25px;
        }
        
        .note {
            background-color: #fff9e6;
            border-left: 5px solid #ffcc00;
            padding: 15px;
            margin: 15px 0;
        }
        
        .topology-image {
            text-align: center;
            margin: 25px 0;
        }
        
        .topology-image img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .caption {
            font-style: italic;
            color: #666;
            margin-top: 8px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            h2 {
                font-size: 20px;
            }
            
            section {
                padding: 15px;
            }
            
            pre {
                font-size: 12px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Laboratorio: Red Jerárquica (Core–Distribution–Access) con Seguridad L2 y Enrutamiento L3</h1>
        <p>Documentación completa del laboratorio CCNA Avanzado</p>
    </header>

    <section class="objective">
        <h2>1) Objetivo</h2>
        <p>Diseñar y configurar una red empresarial basada en el modelo jerárquico de tres capas que implemente:</p>
        <ul>
            <li>Segmentación con VLANs (10, 20, 30, 40) y trunking 802.1Q.</li>
            <li>RSTP con root bridge en el core.</li>
            <li>DHCP Snooping y Dynamic ARP Inspection (DAI) para seguridad L2.</li>
            <li>Port Security en acceso.</li>
            <li>SVIs para enrutamiento inter-VLAN en switches multilayer (capa de distribución).</li>
            <li>SSH/VTY endurecido para administración segura.</li>
            <li>VTP: un servidor para propagar VLANs.</li>
        </ul>
    </section>

    <section>
        <h2>2) Topología y Roles</h2>
        <ul>
            <li><strong>Core:</strong> 2× 3560 (multilayer).
                <ul>
                    <li>Multilayer Switch0 = VTP Server (dominio Servero.hn, password 12345) y Root Bridge primario RSTP.</li>
                    <li>Multilayer Switch1 = Root secundario.</li>
                </ul>
            </li>
            <li><strong>Distribution:</strong> 4× 3560 (multilayer) – gateways de VLAN.</li>
            <li><strong>Access:</strong> 8× 2960 – puertos a usuarios/servidores.</li>
            <li><strong>Servidor:</strong> DHCP/DNS/HTTP en acceso vlan 20.</li>
        </ul>
        
        <div class="topology-image">
            <!-- Espacio para imagen de topología (imagen real no disponible) -->
            <div style="background-color: #eee; padding: 40px; text-align: center; border-radius: 5px;">
                <img src="img/ccnalab2/a.jpg" alt="Laboratorio CCNA 1">
            </div>
            <p class="caption">Figura 1: Topología de red jerárquica de tres capas</p>
        </div>
    </section>

    <section>
        <h2>3) Tabla de VLANs</h2>
        <table>
            <tr>
                <th>LAN</th>
                <th>Red</th>
                <th>Gateway</th>
                <th>Propósito</th>
            </tr>
            <tr>
                <td>10</td>
                <td>10.10.10.0/24</td>
                <td>10.10.10.1</td>
                <td>Usuarios</td>
            </tr>
            <tr>
                <td>20</td>
                <td>10.10.20.0/24</td>
                <td>10.10.20.1</td>
                <td>Servidores</td>
            </tr>
            <tr>
                <td>30</td>
                <td>10.10.30.0/24</td>
                <td>10.10.30.1</td>
                <td>Administración</td>
            </tr>
            <tr>
                <td>40</td>
                <td>10.10.40.0/24</td>
                <td>10.10.40.1</td>
                <td>Invitados</td>
            </tr>
        </table>
    </section>

    <section>
        <h2>4) Configuración</h2>
        
        <div class="config-section">
            <h3>4.1 VTP</h3>
            <p>Configuración en el servidor VTP (Multilayer Switch0):</p>
            <pre><code><span class="command">vtp domain Servero.hn</span>
<span class="command">vtp mode server</span>
<span class="command">vtp password 12345</span>
<span class="command">vlan 10,20,30,40</span></code></pre>
            
            <p>Verificación:</p>
            <pre><code>Switch#<span class="command">show vtp status</span>
VTP Version capable             : 1 to 2
VTP version running             : Servero.hn
VTP Domain Name                 : Disabled
VTP Pruning Mode                : Disabled
VTP Traps Generation            : 000D.BDB4.4B00
Device ID                       : 0.0-0.0 at 3-1-93 00:00:00
Configuration last modified by 0.0-0.0 at 3-1-93 00:00:00
Local updater ID is 0.0-0.0 (no valid interface found)

Feature VLAN:
VTP Operating Mode              : Server
Maximum VLANs supported locally : 1005
Number of existing VLANs        : 9
Configuration Revision          : 34
MD5 digest                      : 0x3B 0xD5 0x46 0x56 0x1D 0x8D 0x30 0x9C
                                0xCC 0x04 0xBA 0x2C 0xD0 0x89 0x4A 0x88</code></pre>
            
            <p>Configuración en switches clientes:</p>
            <pre><code><span class="command">vtp domain Servero.hn</span>
<span class="command">vtp mode client</span>
<span class="command">vtp password 12345</span></code></pre>
        </div>

        <div class="config-section">
            <h3>4.2 Trunking</h3>
            <p>Ejemplo de enlace entre Distribution y Access:</p>
            <pre><code><span class="command">interface range g0/1 - 2</span>
<span class="command">switchport mode trunk</span>
<span class="command">switchport trunk allowed vlan 10,20,30,40</span>
<span class="command">spanning-tree portfast trunk</span></code></pre>
        </div>

        <div class="config-section">
            <h3>4.3 RSTP</h3>
            <p>Configuración global:</p>
            <pre><code><span class="command">spanning-tree mode rapid-pvst</span></code></pre>
            
            <p>Root primario en Multilayer Switch0:</p>
            <pre><code><span class="command">spanning-tree vlan 1,10,20,30,40 root primary</span></code></pre>
            
            <p>Root secundario en Multilayer Switch1:</p>
            <pre><code><span class="comment">! Root secundario en Multilayer Switch1</span>
<span class="command">spanning-tree vlan 1,10,20,30,40 root secondary</span></code></pre>
            
            <p>Configuración en puertos de acceso:</p>
            <pre><code><span class="command">interface range f0/1 - 24</span>
<span class="command">switchport mode access</span>
<span class="command">switchport access vlan 10</span>
<span class="command">spanning-tree portfast</span>
<span class="command">spanning-tree bpduguard enable</span></code></pre>
        </div>

        <div class="config-section">
            <h3>4.4 DHCP Snooping + DAI</h3>
            <p>Configuración global:</p>
            <pre><code><span class="command">ip dhcp snooping</span>
<span class="command">ip dhcp snooping vlan 10,20,30,40</span>
<span class="command">ip arp inspection vlan 10,20,30,40</span></code></pre>
            
            <p>Configuración de uplinks como "trust":</p>
            <pre><code><span class="command">interface g0/1</span>
<span class="command">ip dhcp snooping trust</span>
<span class="command">ip arp inspection trust</span></code></pre>
            
            <p>Configuración de puertos de acceso:</p>
            <pre><code><span class="command">interface range f0/1 - 24</span>
<span class="command">ip dhcp snooping limit rate 10</span></code></pre>
        </div>

        <div class="config-section">
            <h3>4.5 Port Security (acceso)</h3>
            <pre><code><span class="command">interface f0/10</span>
<span class="command">switchport mode access</span>
<span class="command">switchport access vlan 10</span>
<span class="command">switchport port-security</span>
<span class="command">switchport port-security maximum 2</span>
<span class="command">switchport port-security violation restrict</span>
<span class="command">switchport port-security mac-address sticky</span></code></pre>
        </div>

        <div class="config-section">
            <h3>4.6 SVIs (Core = Gateways de VLAN)</h3>
            <pre><code><span class="command">ip routing</span>

<span class="command">interface vlan 10</span>
<span class="command">ip address 10.10.10.1 255.255.255.0</span>

<span class="command">interface vlan 20</span>
<span class="command">ip address 10.10.20.1 255.255.255.0</span>

<span class="command">interface vlan 30</span>
<span class="command">ip address 10.10.30.1 255.255.255.0</span>

<span class="command">interface vlan 40</span>
<span class="command">ip address 10.10.40.1 255.255.255.0</span>

<span class="comment">! Relay al servidor DHCP</span>
<span class="command">ip helper-address 10.10.20.50</span></code></pre>
        </div>

        <div class="config-section">
            <h3>4.9 SSH/VTY Hardening</h3>
            <pre><code><span class="command">hostname DIST-1</span>
<span class="command">ip domain-name lab.local</span>
<span class="command">username admin secret 9 MiClaveFuerte</span>
<span class="command">crypto key generate rsa modulus 2048</span>
<span class="command">ip ssh version 2</span>

<span class="command">line vty 0 4</span>
<span class="command">transport input ssh</span>
<span class="command">login local</span>
<span class="command">exec-timeout 10 0</span>

<span class="command">service password-encryption</span></code></pre>
        </div>
    </section>

    <section>
        <h2>5) Comandos de Validación</h2>
        <pre><code><span class="command">show vlan brief</span>
<span class="command">show vtp status</span>
<span class="command">show spanning-tree summary</span>
<span class="command">show dhcp snooping</span>
<span class="command">show ip dhcp pool</span></code></pre>
    </section>

    <footer>
        <p>Documentación de Laboratorio CCNA Avanzado - Red Jerárquica con Seguridad L2 y Enrutamiento L3</p>
    </footer>
</body>
</html>